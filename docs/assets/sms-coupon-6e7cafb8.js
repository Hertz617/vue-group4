import{x as p,_ as S,d as C,o as T,c as y,a as f,b as l,aj as E,w as a,F as k,i as F,E as v,e as L,f as P,g as r,h as U,j as z,k as W}from"./index-af599a35.js";import{c as $,E as m,a as q}from"./el-select-50159011.js";/* empty css                   */const B=e=>p.request({url:"mall/sms-coupon/page",method:"post",data:e}),_=e=>p.request({url:"mall/sms-coupon/add",method:"post",data:e}),A=e=>p.request({url:"mall/sms-coupon/del/"+e.id,params:e}),D=e=>p.request({url:"mall/sms-coupon/edit",method:"post",data:e}),I=C({data(){return{searchText:"",smscoupons:[],page:{total:0,current:1,size:10},dialogFormVisible:!1,Smscoupon:{amount:0,code:"",count:0,enableTime:"",endTime:"",id:0,memberLevel:0,minPoint:0,name:"",note:"",perLimit:0,platform:0,publishCount:0,receiveCount:0,startTime:"",type:0,useCount:0,useType:0},formLabelWidth:80}},mounted(){this.getSmscouponsPage(1)},methods:{toEdit(e){this.dialogFormVisible=!0,this.Smscoupon=$(e)},getSmscouponsPage(e){B({current:e,size:4}).then(s=>{const c=s.data.page;this.smscoupons=c.records,this.page=c}).catch(s=>{console.log(s)})},currentchange(e){this.getSmscouponsPage(e),this.page.current=e},del(e){confirm("是否删除")==!0&&console.log(e),console.log(e),A({id:e}).then(s=>{if(s.success)this.getSmscouponsPage(this.page.current);else return console.log(s.msg),!1}).catch(s=>{m("删除失败")})},toAdd(){this.dialogFormVisible=!0},save(){const e=this.Smscoupon;e.id==0?_(e).then(o=>{if(o.success)this.dialogFormVisible=!1,this.getSmscouponsPage(this.page.current),m(o.msg);else return m(o.msg),!1}).catch(o=>{m("网络错误联系管理员")}):D(e).then(o=>{if(o.success)this.dialogFormVisible=!1,this.getSmscouponsPage(this.page.current),m(o.msg);else return m(o.msg),!1}).catch(o=>{m("网络错误联系管理员")})}}}),K={class:"smscoupons"},N={class:"smscoupon-tools"},j={class:"dialog-footer"};function M(e,o,s,c,G,H){const n=F,d=v,u=U,g=L,h=q,i=z,b=W,V=P;return T(),y(k,null,[f("div",K,[l(n,{modelValue:e.searchText,"onUpdate:modelValue":o[0]||(o[0]=t=>e.searchText=t),placeholder:"请输入搜索关键字",clearable:"",onClear:e.clearSearch,onKeyup:E(e.performSearch,["enter"]),style:{"margin-bottom":"20px"}},null,8,["modelValue","onClear","onKeyup"]),f("div",N,[l(d,{type:"warning",onClick:e.toAdd},{default:a(()=>[r("添加")]),_:1},8,["onClick"])]),l(g,{data:e.smscoupons,style:{width:"100%"}},{default:a(()=>[l(u,{fixed:"",prop:"id",width:"150"}),l(u,{prop:"amount",label:"金额",width:"120"}),l(u,{prop:"code",label:"优惠码",width:"120"}),l(u,{prop:"count",label:"数量",width:"120"}),l(u,{prop:"enableTime",label:"可以领取的日期",width:"120"}),l(u,{fixed:"right",label:"功能管理",width:"120"},{default:a(t=>[l(d,{link:"",type:"primary",size:"small",onClick:w=>e.toEdit(t.row)},{default:a(()=>[r("更新")]),_:2},1032,["onClick"]),l(d,{link:"",type:"primary",size:"small",onClick:w=>e.del(t.row.id)},{default:a(()=>[r("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(h,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),l(V,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":o[8]||(o[8]=t=>e.dialogFormVisible=t),title:"优惠券编辑"},{footer:a(()=>[f("span",j,[l(d,{onClick:o[7]||(o[7]=t=>e.dialogFormVisible=!1)},{default:a(()=>[r("Cancel")]),_:1}),l(d,{type:"primary",onClick:e.save},{default:a(()=>[r("保存 ")]),_:1},8,["onClick"])])]),default:a(()=>[l(b,{model:e.Smscoupon},{default:a(()=>[l(i,{label:"金额","label-width":e.formLabelWidth},{default:a(()=>[l(n,{modelValue:e.Smscoupon.amount,"onUpdate:modelValue":o[1]||(o[1]=t=>e.Smscoupon.amount=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"优惠码","label-width":e.formLabelWidth},{default:a(()=>[l(n,{modelValue:e.Smscoupon.code,"onUpdate:modelValue":o[2]||(o[2]=t=>e.Smscoupon.code=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"数量","label-width":e.formLabelWidth},{default:a(()=>[l(n,{modelValue:e.Smscoupon.count,"onUpdate:modelValue":o[3]||(o[3]=t=>e.Smscoupon.count=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"可以领取的日期","label-width":e.formLabelWidth},{default:a(()=>[l(n,{modelValue:e.Smscoupon.enableTime,"onUpdate:modelValue":o[4]||(o[4]=t=>e.Smscoupon.enableTime=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"开始时间","label-width":e.formLabelWidth},{default:a(()=>[l(n,{modelValue:e.Smscoupon.startTime,"onUpdate:modelValue":o[5]||(o[5]=t=>e.Smscoupon.startTime=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"结束时间","label-width":e.formLabelWidth},{default:a(()=>[l(n,{modelValue:e.Smscoupon.endTime,"onUpdate:modelValue":o[6]||(o[6]=t=>e.Smscoupon.endTime=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const R=S(I,[["render",M]]);export{R as default};
