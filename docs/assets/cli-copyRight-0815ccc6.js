import{_ as V,d as I,o as R,c as w,a as g,b as o,w as a,F as C,E,e as _,f as k,g as m,h as F,i as B,j as T,k as U}from"./index-af599a35.js";import{E as z}from"./el-date-picker-24a02abf.js";import{c as D,E as s,a as v}from"./el-select-50159011.js";import{c as N,a as L}from"./copyRight-63fccab8.js";import{c as W}from"./major-0bc4fba2.js";/* empty css                   */import"./index-2308d72f.js";const $=I({data(){return{searchText:"",copyrights:[],page:{total:0,current:1,size:10},dialogFormVisible:!1,dialogFormVisibleById:!1,copyRight:{attachment:"",copyrightNo:"",finishTime:"",id:0,name:"",publishTime:"",userId:parseInt(localStorage.getItem("UserID"))},formLabelWidth:100}},mounted(){this.getCopyRightsById(parseInt(localStorage.getItem("UserID")))},methods:{toEdit(e){this.dialogFormVisible=!0,this.copyRight=D(e)},currentchange(e){this.getCopyRightsById(parseInt(localStorage.getItem("UserID"))),this.page.current=e},toAdd(){this.dialogFormVisible=!0},selectById(){this.dialogFormVisibleById=!0},getCopyRightsById(e){W({id:e}).then(d=>{console.log(d),this.dialogFormVisibleById=!1;const r=d.data;console.log(r.copyrights),this.copyrights=r.copyrights,this.page=r,console.log(this.page)}).catch(d=>{s("您尚未上传著作权"),console.log(d)})},save(){const e=this.copyRight;e.id==0?N(e).then(t=>{if(t.success)this.dialogFormVisible=!1,this.getCopyRightsById(parseInt(localStorage.getItem("UserID"))),s(t.msg);else return s(t.msg),!1}).catch(t=>{s("网络错误联系管理员")}):L(e).then(t=>{if(t.success)this.dialogFormVisible=!1,this.getCopyRightsById(parseInt(localStorage.getItem("UserID"))),s(t.msg);else return s(t.msg),!1}).catch(t=>{s("网络错误联系管理员")})}}}),S={class:"copyrights"},P={class:"copyRight-tools"},A={class:"dialog-footer"};function j(e,t,d,r,M,q){const p=E,i=F,c=_,f=v,h=B,n=T,u=z,y=U,b=k;return R(),w(C,null,[g("div",S,[g("div",P,[o(p,{type:"warning",onClick:e.toAdd},{default:a(()=>[m("添加")]),_:1},8,["onClick"])]),o(c,{data:e.copyrights,style:{width:"100%"}},{default:a(()=>[o(i,{fixed:"",prop:"id",label:"编号",width:"100"}),o(i,{prop:"name",label:"著作权名称",width:"140"}),o(i,{prop:"userId",label:"著作权人：第一位",width:"140"}),o(i,{prop:"finishTime",label:"完成时间",width:"140"}),o(i,{prop:"publishTime",label:"首次发表时间",width:"140"}),o(i,{prop:"attachment",label:"佐证材料",width:"160"}),o(i,{prop:"copyrightNo",label:"著作权编号",width:"140"}),o(i,{fixed:"right",label:"操作",width:"120"},{default:a(l=>[o(p,{link:"",type:"primary",size:"small",onClick:G=>e.toEdit(l.row)},{default:a(()=>[m("更新")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),o(f,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),o(b,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[6]||(t[6]=l=>e.dialogFormVisible=l),title:"添加著作权信息"},{footer:a(()=>[g("span",A,[o(p,{onClick:t[5]||(t[5]=l=>e.dialogFormVisible=!1)},{default:a(()=>[m("Cancel")]),_:1}),o(p,{type:"primary",onClick:e.save},{default:a(()=>[m("保存 ")]),_:1},8,["onClick"])])]),default:a(()=>[o(y,{model:e.copyRight},{default:a(()=>[o(n,{label:"著作权名称","label-width":e.formLabelWidth},{default:a(()=>[o(h,{modelValue:e.copyRight.name,"onUpdate:modelValue":t[0]||(t[0]=l=>e.copyRight.name=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(n,{label:"完成时间","label-width":e.formLabelWidth},{default:a(()=>[o(u,{modelValue:e.copyRight.finishTime,"onUpdate:modelValue":t[1]||(t[1]=l=>e.copyRight.finishTime=l),type:"date",placeholder:"Pick a day",size:e.size},null,8,["modelValue","size"])]),_:1},8,["label-width"]),o(n,{label:"首次发表时间","label-width":e.formLabelWidth},{default:a(()=>[o(u,{modelValue:e.copyRight.publishTime,"onUpdate:modelValue":t[2]||(t[2]=l=>e.copyRight.publishTime=l),type:"date",placeholder:"Pick a day",size:e.size},null,8,["modelValue","size"])]),_:1},8,["label-width"]),o(n,{label:"佐证材料","label-width":e.formLabelWidth},{default:a(()=>[o(h,{modelValue:e.copyRight.attachment,"onUpdate:modelValue":t[3]||(t[3]=l=>e.copyRight.attachment=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(n,{label:"著作权编号","label-width":e.formLabelWidth},{default:a(()=>[o(h,{modelValue:e.copyRight.copyrightNo,"onUpdate:modelValue":t[4]||(t[4]=l=>e.copyRight.copyrightNo=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const Z=V($,[["render",j]]);export{Z as default};
