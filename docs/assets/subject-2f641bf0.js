import{_ as c,d as S,o as w,c as y,a as p,b as l,w as o,F as C,E as I,e as k,f as F,g as b,h as B,i as E,j as U,k as v}from"./index-af599a35.js";import{c as L,E as r,a as W}from"./el-select-50159011.js";import{s as P,d as $,b as D,c as z}from"./subject-560fe0bb.js";/* empty css                   */const N=S({data(){return{searchText:"",subjects:[],subject:[],page:{total:0,current:2,size:10},dialogFormVisible:!1,dialogFormVisibleById:!1,Subject:{attachment:"",fee:0,finished:"",id:0,level:"",name:"",origin:"",participant:"",period:"",subjectNo:"",type:"",userId:0},formLabelWidth:80}},mounted(){this.getSubjectsPage(1)},methods:{toEdit(e){this.dialogFormVisible=!0,this.Subject=L(e)},getSubjectsPage(e){P({current:e,size:4}).then(d=>{console.log(d);const m=d.data.page;this.subjects=m.records,this.page=m}).catch(d=>{console.log(d)})},getSubjectsById(e){this.subject=[],$({id:e}).then(d=>{this.dialogFormVisibleById=!1,this.subject.push(d.data.subject);const m=this.subject;this.subjects=m,r("查询成功")}).catch(d=>{r("查询失败，没有该课题"),console.log(d)})},currentchange(e){this.getSubjectsPage(e),this.page.current=e},del(e){if(confirm("是否删除")==!0){console.log(e);const t={id:e};subjectDelId(t).then(d=>{if(d.success)this.getSubjectsPage(this.page.current);else return console.log(d.msg),!1}).catch(d=>{r("删除失败")})}},toAdd(){this.dialogFormVisible=!0},selectById(){this.dialogFormVisibleById=!0},refresh(){this.getSubjectsPage(1)},save(){const e=this.Subject;e.id==0?D(e).then(t=>{if(t.success)this.dialogFormVisible=!1,this.getSubjectsPage(this.page.current),r(t.msg);else return r(t.msg),!1}).catch(t=>{r("网络错误联系管理员")}):z(e).then(t=>{if(t.success)this.dialogFormVisible=!1,this.getSubjectsPage(this.page.current),r(t.msg);else return r(t.msg),!1}).catch(t=>{r("网络错误联系管理员")})}}}),T={class:"subjects"},A={class:"subject-tools"},M={class:"dialog-footer"},q={class:"dialog-footer"};function G(e,t,d,m,H,J){const n=I,i=B,h=k,j=W,s=E,u=U,f=v,g=F;return w(),y(C,null,[p("div",T,[p("div",A,[l(n,{type:"warning",onClick:e.toAdd},{default:o(()=>[b("添加")]),_:1},8,["onClick"]),l(n,{type:"warning",onClick:e.selectById},{default:o(()=>[b("按ID查询数据")]),_:1},8,["onClick"]),l(n,{type:"warning",onClick:e.refresh},{default:o(()=>[b("刷新查询")]),_:1},8,["onClick"])]),l(h,{data:e.subjects,style:{width:"100%"}},{default:o(()=>[l(i,{fixed:"",prop:"id",label:"编号",width:"60",align:"center"}),l(i,{prop:"name",label:"课题名称"}),l(i,{prop:"origin",label:"课题来源"}),l(i,{prop:"fee",label:"课题费用"}),l(i,{prop:"finished",label:"是否结项"}),l(i,{prop:"participant",label:"参与者"}),l(i,{prop:"period",label:"课题周期"}),l(i,{prop:"level",label:"课题等级"}),l(i,{prop:"subjectNo",label:"课题编号"}),l(i,{prop:"type",label:"课题类型"}),l(i,{prop:"attachment",label:"佐证材料"}),l(i,{prop:"userId",label:"负责人"}),l(i,{fixed:"right",label:"功能管理",width:"120"},{default:o(a=>[l(n,{link:"",type:"primary",size:"small",onClick:V=>e.toEdit(a.row)},{default:o(()=>[b("更新")]),_:2},1032,["onClick"]),l(n,{link:"",type:"primary",size:"small",onClick:V=>e.del(a.row.id)},{default:o(()=>[b("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(j,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),l(g,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[13]||(t[13]=a=>e.dialogFormVisible=a),title:"课题信息编辑"},{footer:o(()=>[p("span",M,[l(n,{onClick:t[12]||(t[12]=a=>e.dialogFormVisible=!1)},{default:o(()=>[b("Cancel")]),_:1}),l(n,{type:"primary",onClick:e.save},{default:o(()=>[b("保存 ")]),_:1},8,["onClick"])])]),default:o(()=>[l(f,{model:e.Subject},{default:o(()=>[l(u,{label:"编号","label-width":e.formLabelWidth},{default:o(()=>[l(s,{modelValue:e.Subject.id,"onUpdate:modelValue":t[0]||(t[0]=a=>e.Subject.id=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(u,{label:"课题名称","label-width":e.formLabelWidth},{default:o(()=>[l(s,{modelValue:e.Subject.name,"onUpdate:modelValue":t[1]||(t[1]=a=>e.Subject.name=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(u,{label:"课题来源","label-width":e.formLabelWidth},{default:o(()=>[l(s,{modelValue:e.Subject.origin,"onUpdate:modelValue":t[2]||(t[2]=a=>e.Subject.origin=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(u,{label:"课题费用","label-width":e.formLabelWidth},{default:o(()=>[l(s,{modelValue:e.Subject.fee,"onUpdate:modelValue":t[3]||(t[3]=a=>e.Subject.fee=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(u,{label:"是否结项","label-width":e.formLabelWidth},{default:o(()=>[l(s,{modelValue:e.Subject.finished,"onUpdate:modelValue":t[4]||(t[4]=a=>e.Subject.finished=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(u,{label:"参与者","label-width":e.formLabelWidth},{default:o(()=>[l(s,{modelValue:e.Subject.participant,"onUpdate:modelValue":t[5]||(t[5]=a=>e.Subject.participant=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(u,{label:"课题周期","label-width":e.formLabelWidth},{default:o(()=>[l(s,{modelValue:e.Subject.period,"onUpdate:modelValue":t[6]||(t[6]=a=>e.Subject.period=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(u,{label:"课题等级","label-width":e.formLabelWidth},{default:o(()=>[l(s,{modelValue:e.Subject.level,"onUpdate:modelValue":t[7]||(t[7]=a=>e.Subject.level=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(u,{label:"课题编号","label-width":e.formLabelWidth},{default:o(()=>[l(s,{modelValue:e.Subject.subjectNo,"onUpdate:modelValue":t[8]||(t[8]=a=>e.Subject.subjectNo=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(u,{label:"课题类型","label-width":e.formLabelWidth},{default:o(()=>[l(s,{modelValue:e.Subject.type,"onUpdate:modelValue":t[9]||(t[9]=a=>e.Subject.type=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(u,{label:"佐证材料","label-width":e.formLabelWidth},{default:o(()=>[l(s,{modelValue:e.Subject.attachment,"onUpdate:modelValue":t[10]||(t[10]=a=>e.Subject.attachment=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(u,{label:"负责人","label-width":e.formLabelWidth},{default:o(()=>[l(s,{modelValue:e.Subject.userId,"onUpdate:modelValue":t[11]||(t[11]=a=>e.Subject.userId=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(g,{modelValue:e.dialogFormVisibleById,"onUpdate:modelValue":t[17]||(t[17]=a=>e.dialogFormVisibleById=a),title:"ID查询"},{footer:o(()=>[p("span",q,[l(n,{onClick:t[15]||(t[15]=a=>e.dialogFormVisibleById=!1)},{default:o(()=>[b("Cancel")]),_:1}),l(n,{type:"primary",onClick:t[16]||(t[16]=a=>e.getSubjectsById(e.searchText))},{default:o(()=>[b("查询 ")]),_:1})])]),default:o(()=>[l(f,{model:e.Subject},{default:o(()=>[l(u,{label:"请输入ID","label-width":120},{default:o(()=>[l(s,{modelValue:e.searchText,"onUpdate:modelValue":t[14]||(t[14]=a=>e.searchText=a),placeholder:"按ID搜索，请输入ID",style:{"margin-bottom":"20px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const X=c(N,[["render",G]]);export{X as default};
