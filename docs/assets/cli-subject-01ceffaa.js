import{_ as j,d as V,o as S,c as I,a as p,b as l,w as o,F as w,E as y,e as U,f as B,g as m,h as C,i as E,j as F,k}from"./index-af599a35.js";import{c as v,E as n,a as L}from"./el-select-50159011.js";import{s as W,a as D,b as N,c as z}from"./subject-560fe0bb.js";/* empty css                   */const $=V({data(){return{searchText:"",subjects:[],subject:[],page:{total:0,current:2,size:10},dialogFormVisible:!1,dialogFormVisibleById:!1,Subject:{attachment:"",fee:0,finished:"",id:0,level:"",name:"",origin:"",participant:"",period:"",subjectNo:"",type:"",userId:parseInt(localStorage.getItem("UserID"))},formLabelWidth:80}},mounted(){this.getSubjectsById(parseInt(localStorage.getItem("UserID")))},methods:{toEdit(e){this.dialogFormVisible=!0,this.Subject=v(e)},getSubjectsPage(e){console.log("page"),W({current:e,size:4}).then(s=>{const r=s.data.page;this.subjects=r.records,this.page=r}).catch(s=>{console.log(s)})},getSubjectsById(e){console.log("userid"),this.subject=[],D({id:e}).then(s=>{console.log(s),this.dialogFormVisibleById=!1;const r=s.data;this.subjects=r.subjects,this.page=r}).catch(s=>{n("您尚未上传课题"),console.log(s)})},currentchange(e){console.log("current"),this.getSubjectsById(parseInt(localStorage.getItem("UserID"))),this.page.current=e},del(e){if(confirm("是否删除")==!0){console.log(e);const t={id:e};subjectDelId(t).then(s=>{if(s.success)this.getSubjectsById(parseInt(localStorage.getItem("UserID")));else return console.log(s.msg),!1}).catch(s=>{n("删除失败")})}},toAdd(){this.dialogFormVisible=!0},selectById(){this.dialogFormVisibleById=!0},refresh(){this.getSubjectsPage(1)},save(){const e=this.Subject;e.id==0?N(e).then(t=>{if(t.success)this.dialogFormVisible=!1,this.getSubjectsById(parseInt(localStorage.getItem("UserID")));else return n(t.msg),!1}).catch(t=>{n("网络错误联系管理员")}):z(e).then(t=>{if(t.success)this.dialogFormVisible=!1,this.getSubjectsById(parseInt(localStorage.getItem("UserID"))),n(t.msg);else return n(t.msg),!1}).catch(t=>{n("网络错误联系管理员")})}}}),P={class:"subjects"},T={class:"subject-tools"},A={class:"dialog-footer"};function M(e,t,s,r,q,G){const b=y,i=C,f=U,c=L,d=E,u=F,g=k,h=B;return S(),I(w,null,[p("div",P,[p("div",T,[l(b,{type:"warning",onClick:e.toAdd},{default:o(()=>[m("添加")]),_:1},8,["onClick"])]),l(f,{data:e.subjects,style:{width:"100%"}},{default:o(()=>[l(i,{fixed:"",prop:"id",label:"编号",width:"60",align:"center"}),l(i,{prop:"name",label:"课题名称"}),l(i,{prop:"userId",label:"负责人"}),l(i,{prop:"origin",label:"课题来源"}),l(i,{prop:"fee",label:"课题费用"}),l(i,{prop:"finished",label:"是否结项"}),l(i,{prop:"participant",label:"参与者"}),l(i,{prop:"period",label:"课题周期"}),l(i,{prop:"level",label:"课题等级"}),l(i,{prop:"subjectNo",label:"课题编号"}),l(i,{prop:"type",label:"课题类型"}),l(i,{prop:"attachment",label:"佐证材料"}),l(i,{fixed:"right",label:"功能管理",width:"120"},{default:o(a=>[l(b,{link:"",type:"primary",size:"small",onClick:H=>e.toEdit(a.row)},{default:o(()=>[m("更新")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(c,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),l(h,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[11]||(t[11]=a=>e.dialogFormVisible=a),title:"课题信息编辑"},{footer:o(()=>[p("span",A,[l(b,{onClick:t[10]||(t[10]=a=>e.dialogFormVisible=!1)},{default:o(()=>[m("Cancel")]),_:1}),l(b,{type:"primary",onClick:e.save},{default:o(()=>[m("保存 ")]),_:1},8,["onClick"])])]),default:o(()=>[l(g,{model:e.Subject},{default:o(()=>[l(u,{label:"课题名称","label-width":e.formLabelWidth},{default:o(()=>[l(d,{modelValue:e.Subject.name,"onUpdate:modelValue":t[0]||(t[0]=a=>e.Subject.name=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(u,{label:"课题来源","label-width":e.formLabelWidth},{default:o(()=>[l(d,{modelValue:e.Subject.origin,"onUpdate:modelValue":t[1]||(t[1]=a=>e.Subject.origin=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(u,{label:"课题费用","label-width":e.formLabelWidth},{default:o(()=>[l(d,{modelValue:e.Subject.fee,"onUpdate:modelValue":t[2]||(t[2]=a=>e.Subject.fee=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(u,{label:"是否结项","label-width":e.formLabelWidth},{default:o(()=>[l(d,{modelValue:e.Subject.finished,"onUpdate:modelValue":t[3]||(t[3]=a=>e.Subject.finished=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(u,{label:"参与者","label-width":e.formLabelWidth},{default:o(()=>[l(d,{modelValue:e.Subject.participant,"onUpdate:modelValue":t[4]||(t[4]=a=>e.Subject.participant=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(u,{label:"课题周期","label-width":e.formLabelWidth},{default:o(()=>[l(d,{modelValue:e.Subject.period,"onUpdate:modelValue":t[5]||(t[5]=a=>e.Subject.period=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(u,{label:"课题等级","label-width":e.formLabelWidth},{default:o(()=>[l(d,{modelValue:e.Subject.level,"onUpdate:modelValue":t[6]||(t[6]=a=>e.Subject.level=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(u,{label:"课题编号","label-width":e.formLabelWidth},{default:o(()=>[l(d,{modelValue:e.Subject.subjectNo,"onUpdate:modelValue":t[7]||(t[7]=a=>e.Subject.subjectNo=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(u,{label:"课题类型","label-width":e.formLabelWidth},{default:o(()=>[l(d,{modelValue:e.Subject.type,"onUpdate:modelValue":t[8]||(t[8]=a=>e.Subject.type=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(u,{label:"佐证材料","label-width":e.formLabelWidth},{default:o(()=>[l(d,{modelValue:e.Subject.attachment,"onUpdate:modelValue":t[9]||(t[9]=a=>e.Subject.attachment=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const R=j($,[["render",M]]);export{R as default};
